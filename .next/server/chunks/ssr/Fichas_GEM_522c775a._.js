module.exports=[78532,(a,b,c)=>{"use strict";b.exports=a.r(41080).vendored["react-ssr"].ReactDOM},34486,a=>{"use strict";var b=a.i(66953),c=a.i(85472),d=a.i(32655);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},17340,60176,a=>{"use strict";var b=a.i(66953),c=a.i(85472),d=a.i(32655);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e],17340),a.i(78532);var f=a.i(59817),g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{let e=(0,f.createSlot)(`Primitive.${d}`),g=c.forwardRef((a,c)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?e:d,{...g,ref:c})});return g.displayName=`Primitive.${d}`,{...a,[d]:g}},{}),h=c.forwardRef((a,c)=>(0,b.jsx)(g.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));h.displayName="Label";let i=(0,a.i(75142).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(h,{ref:e,className:(0,d.cn)(i(),a),...c}));j.displayName=h.displayName,a.s(["Label",()=>j],60176)},87709,a=>{"use strict";let b=(0,a.i(61848).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],87709)},99111,a=>{"use strict";let b=(0,a.i(61848).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],99111)},20401,a=>{"use strict";var b=a.i(66953),c=a.i(85472),d=a.i(47240),e=a.i(4328),f=a.i(68164),g=a.i(65533),h=a.i(32369),i=a.i(34959),j=a.i(17340),k=a.i(60176),l=a.i(34486),m=a.i(87709),n=a.i(99111);let o=h.z.object({nome:h.z.string().min(3,"Nome deve ter pelo menos 3 caracteres"),dataNascimento:h.z.string().optional(),telefone:h.z.string().optional(),email:h.z.string().email("Email inválido").optional().or(h.z.literal("")),congregacao:h.z.string().min(1,"Congregação é obrigatória"),instrumentoId:h.z.string().min(1,"Selecione um instrumento"),faseId:h.z.string().min(1,"Selecione uma fase"),instrutor2Id:h.z.string().optional().nullable(),autorizacaoDados:h.z.boolean()});function p({aluno:a,instrumentos:h,fases:p,instrutores:q}){let r=(0,d.useRouter)(),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),{register:y,handleSubmit:z,formState:{errors:A}}=(0,f.useForm)({resolver:(0,g.zodResolver)(o),defaultValues:{nome:a.nome,dataNascimento:a.dataNascimento?a.dataNascimento.split("T")[0]:"",telefone:a.telefone||"",email:a.email||"",congregacao:a.congregacao,instrumentoId:a.instrumentoId,faseId:a.faseId,instrutor2Id:a.instrutor2Id,autorizacaoDados:a.autorizacaoDados}}),B=async b=>{t(!0),x("");try{let c=await fetch(`/api/alunos/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json();throw Error(a.error||"Erro ao atualizar aluno")}r.push(`/dashboard/alunos/${a.id}`),r.refresh()}catch(a){x(a instanceof Error?a.message:"Erro ao atualizar aluno")}finally{t(!1)}},C=async()=>{if(confirm("Tem certeza que deseja desativar este aluno?")){v(!0);try{if(!(await fetch(`/api/alunos/${a.id}`,{method:"DELETE"})).ok)throw Error("Erro ao desativar aluno");r.push("/dashboard/alunos"),r.refresh()}catch(a){x(a instanceof Error?a.message:"Erro ao desativar aluno")}finally{v(!1)}}};return(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:`/dashboard/alunos/${a.id}`,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(m.ArrowLeft,{className:"w-4 h-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Aluno"}),(0,b.jsx)("p",{className:"text-gray-500",children:a.nome})]})]}),(0,b.jsxs)(i.Button,{variant:"destructive",size:"sm",onClick:C,disabled:u,children:[(0,b.jsx)(n.Trash2,{className:"w-4 h-4 mr-2"}),u?"Desativando...":"Desativar"]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsx)(l.CardHeader,{children:(0,b.jsx)(l.CardTitle,{children:"Dados do Aluno"})}),(0,b.jsx)(l.CardContent,{children:(0,b.jsxs)("form",{onSubmit:z(B),className:"space-y-6",children:[w&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-lg border border-red-200",children:w}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"nome",children:"Nome Completo *"}),(0,b.jsx)(j.Input,{id:"nome",...y("nome"),placeholder:"Nome do aluno"}),A.nome&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.nome.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"dataNascimento",children:"Data de Nascimento"}),(0,b.jsx)(j.Input,{id:"dataNascimento",type:"date",...y("dataNascimento")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"telefone",children:"Telefone"}),(0,b.jsx)(j.Input,{id:"telefone",...y("telefone"),placeholder:"(11) 99999-0000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(j.Input,{id:"email",type:"email",...y("email"),placeholder:"email@exemplo.com"}),A.email&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.email.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"congregacao",children:"Congregação *"}),(0,b.jsx)(j.Input,{id:"congregacao",...y("congregacao"),placeholder:"Nome da congregação"}),A.congregacao&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.congregacao.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"instrumentoId",children:"Instrumento *"}),(0,b.jsxs)("select",{id:"instrumentoId",...y("instrumentoId"),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[(0,b.jsx)("option",{value:"",children:"Selecione..."}),h.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.nome," (",a.categoria,")"]},a.id))]}),A.instrumentoId&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.instrumentoId.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"faseId",children:"Fase *"}),(0,b.jsxs)("select",{id:"faseId",...y("faseId"),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[(0,b.jsx)("option",{value:"",children:"Selecione..."}),p.map(a=>(0,b.jsx)("option",{value:a.id,children:a.nome},a.id))]}),A.faseId&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A.faseId.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"instrutor2Id",children:"2º Instrutor (Opcional)"}),(0,b.jsxs)("select",{id:"instrutor2Id",...y("instrutor2Id"),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[(0,b.jsx)("option",{value:"",children:"Selecione..."}),q.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.usuario.nome.split(" ")[0]," (",a.usuario.nome,")"]},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"autorizacaoDados",...y("autorizacaoDados"),className:"h-4 w-4 rounded border-gray-300"}),(0,b.jsx)(k.Label,{htmlFor:"autorizacaoDados",className:"text-sm font-normal",children:"Autorizo a Congregação Cristã no Brasil – CCB a tratar meus dados pessoais, inclusive sensíveis, para a gestão da Música, os quais não serão divulgados a terceiros."})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)(e.default,{href:`/dashboard/alunos/${a.id}`,className:"flex-1",children:(0,b.jsx)(i.Button,{type:"button",variant:"outline",className:"w-full",children:"Cancelar"})}),(0,b.jsx)(i.Button,{type:"submit",className:"flex-1",disabled:s,children:s?"Salvando...":"Salvar Alterações"})]})]})})]})]})}a.s(["EditarAlunoForm",()=>p])}];

//# sourceMappingURL=Fichas_GEM_522c775a._.js.map