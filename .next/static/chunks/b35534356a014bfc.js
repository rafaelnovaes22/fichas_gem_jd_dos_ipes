(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83385,e=>{"use strict";var a=e.i(46997),s=e.i(3386),r=e.i(33637);let t=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));t.displayName="Card";let o=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let l=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));l.displayName="CardDescription";let d=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>t,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>o,"CardTitle",()=>i])},14724,89344,e=>{"use strict";var a=e.i(46997),s=e.i(3386),r=e.i(33637);let t=s.forwardRef(({className:e,type:s,...t},o)=>(0,a.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...t}));t.displayName="Input",e.s(["Input",()=>t],14724),e.i(64827);var o=e.i(54958),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,o.createSlot)(`Primitive.${r}`),i=s.forwardRef((e,s)=>{let{asChild:o,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o?t:r,{...i,ref:s})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),l=s.forwardRef((e,s)=>(0,a.jsx)(i.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";let d=(0,e.i(89547).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l,{ref:t,className:(0,r.cn)(d(),e),...s}));n.displayName=l.displayName,e.s(["Label",()=>n],89344)},37190,e=>{"use strict";let a=(0,e.i(74730).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],37190)},7121,e=>{"use strict";let a=(0,e.i(74730).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],7121)},71258,e=>{"use strict";var a=e.i(46997),s=e.i(3386),r=e.i(72528),t=e.i(87948),o=e.i(92406),i=e.i(73743),l=e.i(53331),d=e.i(38933),n=e.i(14724),c=e.i(89344),m=e.i(83385),u=e.i(37190),x=e.i(7121);let p=l.z.object({nome:l.z.string().min(3,"Nome deve ter pelo menos 3 caracteres"),dataNascimento:l.z.string().optional(),telefone:l.z.string().optional(),email:l.z.string().email("Email inválido").optional().or(l.z.literal("")),congregacao:l.z.string().min(1,"Congregação é obrigatória"),instrumentoId:l.z.string().min(1,"Selecione um instrumento"),faseId:l.z.string().min(1,"Selecione uma fase"),instrutor2Id:l.z.string().optional().nullable(),autorizacaoDados:l.z.boolean()});function h({aluno:e,instrumentos:l,fases:h,instrutores:f}){let g=(0,r.useRouter)(),[j,b]=(0,s.useState)(!1),[v,N]=(0,s.useState)(!1),[y,w]=(0,s.useState)(""),{register:I,handleSubmit:C,formState:{errors:z}}=(0,o.useForm)({resolver:(0,i.zodResolver)(p),defaultValues:{nome:e.nome,dataNascimento:e.dataNascimento?e.dataNascimento.split("T")[0]:"",telefone:e.telefone||"",email:e.email||"",congregacao:e.congregacao,instrumentoId:e.instrumentoId,faseId:e.faseId,instrutor2Id:e.instrutor2Id,autorizacaoDados:e.autorizacaoDados}}),k=async a=>{b(!0),w("");try{let s=await fetch(`/api/alunos/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json();throw Error(e.error||"Erro ao atualizar aluno")}g.push(`/dashboard/alunos/${e.id}`),g.refresh()}catch(e){w(e instanceof Error?e.message:"Erro ao atualizar aluno")}finally{b(!1)}},D=async()=>{if(confirm("Tem certeza que deseja desativar este aluno?")){N(!0);try{if(!(await fetch(`/api/alunos/${e.id}`,{method:"DELETE"})).ok)throw Error("Erro ao desativar aluno");g.push("/dashboard/alunos"),g.refresh()}catch(e){w(e instanceof Error?e.message:"Erro ao desativar aluno")}finally{N(!1)}}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(t.default,{href:`/dashboard/alunos/${e.id}`,children:(0,a.jsx)(d.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(u.ArrowLeft,{className:"w-4 h-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Aluno"}),(0,a.jsx)("p",{className:"text-gray-500",children:e.nome})]})]}),(0,a.jsxs)(d.Button,{variant:"destructive",size:"sm",onClick:D,disabled:v,children:[(0,a.jsx)(x.Trash2,{className:"w-4 h-4 mr-2"}),v?"Desativando...":"Desativar"]})]}),(0,a.jsxs)(m.Card,{children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsx)(m.CardTitle,{children:"Dados do Aluno"})}),(0,a.jsx)(m.CardContent,{children:(0,a.jsxs)("form",{onSubmit:C(k),className:"space-y-6",children:[y&&(0,a.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-lg border border-red-200",children:y}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"nome",children:"Nome Completo *"}),(0,a.jsx)(n.Input,{id:"nome",...I("nome"),placeholder:"Nome do aluno"}),z.nome&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:z.nome.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"dataNascimento",children:"Data de Nascimento"}),(0,a.jsx)(n.Input,{id:"dataNascimento",type:"date",...I("dataNascimento")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"telefone",children:"Telefone"}),(0,a.jsx)(n.Input,{id:"telefone",...I("telefone"),placeholder:"(11) 99999-0000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(n.Input,{id:"email",type:"email",...I("email"),placeholder:"email@exemplo.com"}),z.email&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:z.email.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"congregacao",children:"Congregação *"}),(0,a.jsx)(n.Input,{id:"congregacao",...I("congregacao"),placeholder:"Nome da congregação"}),z.congregacao&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:z.congregacao.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"instrumentoId",children:"Instrumento *"}),(0,a.jsxs)("select",{id:"instrumentoId",...I("instrumentoId"),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[(0,a.jsx)("option",{value:"",children:"Selecione..."}),l.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.nome," (",e.categoria,")"]},e.id))]}),z.instrumentoId&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:z.instrumentoId.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"faseId",children:"Fase *"}),(0,a.jsxs)("select",{id:"faseId",...I("faseId"),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[(0,a.jsx)("option",{value:"",children:"Selecione..."}),h.map(e=>(0,a.jsx)("option",{value:e.id,children:e.nome},e.id))]}),z.faseId&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:z.faseId.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"instrutor2Id",children:"2º Instrutor (Opcional)"}),(0,a.jsxs)("select",{id:"instrutor2Id",...I("instrutor2Id"),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[(0,a.jsx)("option",{value:"",children:"Selecione..."}),f.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.usuario.nome.split(" ")[0]," (",e.usuario.nome,")"]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"autorizacaoDados",...I("autorizacaoDados"),className:"h-4 w-4 rounded border-gray-300"}),(0,a.jsx)(c.Label,{htmlFor:"autorizacaoDados",className:"text-sm font-normal",children:"Autorizo a Congregação Cristã no Brasil – CCB a tratar meus dados pessoais, inclusive sensíveis, para a gestão da Música, os quais não serão divulgados a terceiros."})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(t.default,{href:`/dashboard/alunos/${e.id}`,className:"flex-1",children:(0,a.jsx)(d.Button,{type:"button",variant:"outline",className:"w-full",children:"Cancelar"})}),(0,a.jsx)(d.Button,{type:"submit",className:"flex-1",disabled:j,children:j?"Salvando...":"Salvar Alterações"})]})]})})]})]})}e.s(["EditarAlunoForm",()=>h])}]);